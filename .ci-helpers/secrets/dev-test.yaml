nameOverride: io2-portal
fullnameOverride: io2-portal

common:
  restartPolicy: Always
  nodeSelector:
    kops.k8s.io/instancegroup: nodes
  image:
    pullSecrets: []
    pullPolicy: Always
  service:
    type: ClusterIP
    port: 80
    targetPort: 5000
    servicePortName: http

cavaMedia:
  enabled: true
  name: cava-media
  path: /media
  service:
    targetPort: 8080
    portName: http
  image:
    repository: cormorack/cava-media
    tag: latest
  resources:
    requests:
      memory: 1Gi
      cpu: 100m
    limits:
      memory: 2Gi
      cpu: "1"
  env:
  - name: WPUSER
    valueFrom:
      secretKeyRef:
        name: cava-secrets
        key: cavamedia-wpuser
  - name: WPPASSWORD
    valueFrom:
      secretKeyRef:
        name: cava-secrets
        key: cavamedia-wppasswd
  - name: USERNAME
    valueFrom:
      secretKeyRef:
        name: cava-secrets
        key: mysql-username
  - name: PASSWORD
    valueFrom:
      secretKeyRef:
        name: cava-secrets
        key: mysql-password
  - name: HOST
    valueFrom:
      secretKeyRef:
        name: cava-secrets
        key: mysql-host
  - name: PORT
    value: "3306"
  - name: DBNAME
    value: "cavaweb"
  - name: MAXFILESIZE
    value: "419430400"
  - name: SERVER_URL
    value: "-server -Xmx1g -Xms1g"
  - name: ISSUES
    valueFrom:
      secretKeyRef:
        name: cava-secrets
        key: github-bot-token